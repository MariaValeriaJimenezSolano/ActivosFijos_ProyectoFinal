@model  List<ProyectoFinal_ActivosFijos.Models.TableViewModel.UsuariosTableViewModel>
@{
    ViewBag.Title = "Add Usuario";
    Layout = "~/Views/Shared/_AdminLayout.cshtml"; // Utiliza el diseño específico para administración
}
<h2 class="mb-4 text-center">Lista de Usuarios</h2>

<!-- Botón para agregar nuevos usuarios -->
<a class="btn btn-primary mb-4" href="@Url.Action("Add")">
    <i class="bi bi-person-plus"></i> Agregar Usuario
</a>

<!-- Tabla de usuarios -->
<div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead class="bg-dark text-white">
            <tr>
                <th>Cédula</th>
                <th>Nombre</th>
                <th>Primer Apellido</th>
                <th>Segundo Apellido</th>
                <th>Edad</th>
                <th>Teléfono</th>
                <th>Correo</th>
                <th>Dirección</th>
                <th>Tipo de Usuario</th>
                <th>Sexo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var usuario in Model)
            {
                <tr>
                    <td hidden>@usuario.Id</td>
                    <td>@usuario.Cedula</td>
                    <td>@usuario.Nombre</td>
                    <td>@usuario.PrimerApellido</td>
                    <td>@usuario.SegundoApellido</td>
                    <td>@usuario.Edad</td>
                    <td>@usuario.Telefono</td>
                    <td>@usuario.Correo</td>
                    <td>@usuario.Direccion</td>
                    <td>
                        @if (usuario.TipoDeUsuario == 1)
                        {
                            @:Administrador
                        }
                        else if (usuario.TipoDeUsuario == 2)
                        {
                            @:Cliente
                        }
                        else
                        {
                            @:Rol desconocido
                        }
                    </td>
                    <td>@usuario.Sexo</td>
                    <td>
                        <!-- Botones de acción con diseño uniforme -->
                        <a class="btn btn-outline-warning btn-sm me-2" href="@Url.Action("Edit", new { ID = usuario.Id })">
                            <i class="bi bi-pencil"></i> Editar
                        </a>
                        <a class="btn btn-outline-danger btn-sm" href="@Url.Action("Delete", new { ID = usuario.Id })"
                           onclick="return confirm('¿Estás seguro de que deseas eliminar este usuario?');">
                            <i class="bi bi-trash"></i> Eliminar
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Botón para regresar al menú principal -->
<a href="@Url.Action("Index", "Admin")" class="btn btn-secondary mt-4">
    <i class="bi bi-arrow-left-circle"></i> Regresar al Menú Principal
</a>

<script>
    function Delete(Id) {
        if (confirm("¿Deseas eliminar el registro?")) {
            let url = "@Url.Content("~/Usuario/Delete/")" + Id;

            $.post(url, function (respuesta) {
                if (respuesta === "200") {
                    document.location.href = "@Url.Content("~/Usuario/Index")";
                    alert("Registro borrado exitosamente");
                } else {
                    alert("Ocurrió un error al borrar: " + respuesta);
                }
            });
        }
    }
</script>
